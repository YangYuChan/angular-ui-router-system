<div ng-controller="updataAccCtrl">
<section class="main_right" >
	<h2><p>授权信息</p></h2>
	<div class="main_select clearfix">
		<form role="form" class="form-horizontal">
			<div class="form-group col-md-6">
				<label for="bluetoothID" class="col-md-4 control-label">蓝牙锁ID</label>
				<div class="col-md-8">
					<input type="text" class="form-control" id="bluetoothID" placeholder="蓝牙锁ID" ng-model="accreditSearch.b_key">
				</div>
			</div>
			<div class="form-group col-md-6">
				<label for="staffID" class="col-md-4 control-label">被授权员工ID</label>
				<div class="col-md-8">
					<input type="text" class="form-control" id="staffID" placeholder="被授权员工ID" ng-model="accreditSearch.emp.eid">
				</div>
			</div>
			<div class="form-group col-md-6">
				<label for="staffName" class="col-md-4 control-label">被授权员工名称</label>
				<div class="col-md-8">
					<input type="text" class="form-control" id="staffName" placeholder="被授权员工名称" ng-model="accreditSearch.emp.ename">
				</div>
			</div>
			<div class="form-group col-md-6">
				<label for="staffDepartment" class="col-md-4 control-label">所属部门或单位</label>
				<div class="col-md-8">
					<input type="text" class="form-control" id="staffDepartment" placeholder="所属部门或单位" ng-model="accreditSearch.did">
				</div>
			</div>

		</form>
		<div class="col-md-12 add-btn-box">
			<a class="btn btn-success" ui-sref="main.add_accredit"><i class="icon-plus"></i>&nbsp;添加</a>
			<a class="btn btn-danger"><i class="icon-trash"></i>&nbsp;全部解除</a>
		</div>
	</div>
	<table cellpadding="0" cellspacing="0" class="list-table" ng-controller="checkAllList">
		<thead>
			<tr>
				<th>
					<input type="checkbox"  ng-click="selectAll()" ng-model="select_all">
				</th>
				<th>蓝牙锁ID</th>
				<th>被授权员工ID</th>
				<th>被授权员工名称</th>
				<th>所属部门或单位</th>
				<th>授权状态</th>
				<th>授权时间</th>
				<th>授权到期时间</th>
				<th>管理员名称</th>
				<th>操作</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="ad in accredits | filter:accreditSearch">
				<td>
					<input type="checkbox" ng-click="selectOne()" ng-model="ad.checked">
				</td>
				<td>{{ad.b_key}}</td>
				<td>{{ad.eid}}</td>
				<td>{{ad.emp.ename}}</td>
				<td>{{ad.dept.pname}}</td>
				<td>{{ad.jstatic}}</td>
				<td>{{ad.jstop | date:'yyyy-MM-dd HH:mm:ss'}}</td>
				<td>{{ad.jtime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
				<td>{{ad.uname}}</td>
				<td width="120">
					<a href="javascript:void(0)" ng-click="updateAccInfo($index)">修改</a>
					
					<a href="#">解除</a>
				</td>
			</tr>
		</tbody>
	</table>
	<nav class="paging">
		<ul class="pagination">
			<li class="disabled">
				<a href="#">&laquo;</a>
			</li>
			<li class="active">
				<a href="#">1 <span class="sr-only">(current)</span></a>
			</li>
			<li>
				<a href="#">2</a>
			</li>
			<li>
				<a href="#">3</a>
			</li>
			<li>
				<a href="#">&raquo;</a>
			</li>
		</ul>
	</nav>
</section>
		<div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" class="modal fade" id="myModal" style="display: none;">
			<div class="modal-dialog update-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button aria-hidden="true" data-dismiss="modal" class="close" type="button">×</button>
						<h4 id="myModalLabel" class="modal-title">修改授权信息</h4>
					</div>
					<div class="modal-body">
						<form name="updateAccredit" ng-submit="updataAccredit()">
							<table cellpadding="0" cellspacing="0" class="update-table">
								<thead>
									<tr>
										<td class="col-md-2">蓝牙锁ID</td>
										<td class="col-md-6">
											<input type="text" ng-model="accs.b_key" value="{{accs.b_key}}" readonly="readonly" class="form-control form-text"/>
										
										</td>
									</tr>
									<tr>
										<td class="col-md-2">员工姓名</td>
										<td class="col-md-6">
											<input type="text" ng-model="accs.ename" value="{{accs.ename}}" readonly="readonly" class="form-control form-text"/>

										</td>
									</tr>
									<tr>
										<td class="col-md-2">授权状态</td>
										<td class="col-md-6">
											<select class="form-control form-select" name="state" required ng-model="accs.jstatic" >
												<option>已授权</option>
												<option>未授权</option>
												<option>待授权</option>
											</select>
										</td>
									</tr>
									<tr>
										<td class="col-md-2">授权截至日期</td>
										<td class="col-md-6">
											<div class="accredit-time">
												<input class="flatpickr flatpickr-input active form_datetime form-control form-text" 
													data-enable-time="true" 
													data-enable-seconds="true" 
													id="endTime" 
													ng-model="accs.jtime"
													name="endTime"
													value="{{accs.jtime | date:'yyyy-MM-dd HH:mm:ss'}}">
												<i class="icon icon-calendar"></i>
											</div>

										</td>
									</tr>
									<tr>
										<td class="col-md-12" colspan="2" style="text-align: center;">
											<button class="btn btn-success" type="submit" ng-disabled="updateAccredit.$invalid">修改</button>
										</td>
									</tr>
									</tbody>
							</table>
						</form>

					</div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
		</div>
		<script type="text/javascript">
			$(".flatpickr").flatpickr();

			
		</script>